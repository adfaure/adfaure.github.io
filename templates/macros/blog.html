
{% macro page_summary(page) %}
<a  href="{{ page.permalink | safe }}">
  <h2 class="text-1xl font-bold text-blue-600 hover:text-blue-800 visited:text-purple-600">{{ page.title }}</h2>
  {% if page.summary %}
  <p class="pb-1"> {{ page.summary | safe }} </p>
  {% elif page.description %}
  <p class="pb-1"> {{ page.description | safe }} </p>
  {% endif %}
  <p class="text-sm text-slate-400"> {{ page.date }} • wordcount: {{ page.word_count }} • {{ page.reading_time }} min read </p>
</a>
{% endmacros %}

{% macro publication_summary(page) -%}
{% set bibtex_path = page.permalink ~ "bib" -%}
{% set bibtex = load_data(url=bibtex_path, required=false, format="bibtex") -%}

{% if bibtex %}
  {% set bibdata = bibtex.bibliographies[0].tags -%}
{% endif %}

<div class="py-4 px-8 bg-white shadow-lg rounded-lg hover:shadow-xl">
  <a  href="{{ page.permalink | safe }}">

    <h2 class="text-1xl font-bold text-blue-600 hover:text-blue-800 visited:text-purple-600">{{ page.title }}</h2>
    <div class="pb-2">
      <p class="text-sm text-slate-400">
        {% for author in page.extra.authors %}
          {{ author }}{% if loop.last %}.{% else %},{% endif %}
        {% endfor %}
      </p>
    </div>

    {% if bibdata.abstract %}
    <p class="text-sm"> {{ bibdata.abstract | safe | truncate(length=250) }} </p>
    {% endif %}
    <p class="text-sm text-slate-400 pb-4">{{ page.date |  date(format="%B %Y") }}  {% if bibdata.booktitle %} • {{  bibdata.booktitle }}{% endif %}</p>
    {% if page.extra.url_pdf %}
    <a class="rounded-md border-solid border border-blue-600 inline-flex items-center text-blue-600 justify-center px-2 py-1 mr-2 text-xs font-bold" href="{{ page.extra.url_pdf }}"> pdf </a>
    {% endif %}
    {% if page.extra.url_slides %}
    <a class="rounded-md border-solid border border-blue-600 inline-flex items-center text-blue-600 justify-center px-2 py-1 mr-2 text-xs font-bold" href="{{ page.extra.url_slides }}"> slides </a>
    {% endif %}
    {% if bibdata and bibdata.url %}
    <a class="rounded-md border-solid border border-blue-600 inline-flex items-center text-blue-600 justify-center px-2 py-1 mr-2 text-xs font-bold" href="{{bibdata.url}}"> url </a>
    {% endif %}
  </a>
</div>
{% endmacros %}

{% macro publication_summary_from_bibtex(bibtex_path, permalink) -%}

{% set data = load_data(path=bibtex_path, format="bibtex") -%}
{% set publication = data.bibliographies[0].tags -%}

<div class="py-4 px-8 bg-white shadow-lg rounded-lg hover:shadow-xl">
  <a href="{{ permalink | safe }}">

    <h2 class="text-1xl font-bold text-blue-600 hover:text-blue-800 visited:text-purple-600">{{ publication.title }}</h2>
    <div class="pb-2">
      <p class="text-sm text-slate-400">
        {{ publication.author }}
      </p>
    </div>

    {% if publication.abstract %}
    <p class="text-sm"> {{ publication.abstract | safe | truncate(length=500) }} </p>
    {% endif %}

    <p class="text-sm text-slate-400 pb-4">{{ publication.year }} {% if publication.booktitle %} • {{  publication.booktitle }}{% endif %}</p>

    {% if page.extra.url_pdf %}
    <a class="rounded-md border-solid border border-blue-600 inline-flex items-center text-blue-600 justify-center px-2 py-1 mr-2 text-xs font-bold" href="{{ page.extra.url_pdf }}"> pdf </a>
    {% endif %}
    {% if page.extra.url_slides %}
    <a class="rounded-md border-solid border border-blue-600 inline-flex items-center text-blue-600 justify-center px-2 py-1 mr-2 text-xs font-bold" href="{{ page.extra.url_slides }}"> slides </a>
    {% endif %}
  </a>
</div>
{% endmacros %}
